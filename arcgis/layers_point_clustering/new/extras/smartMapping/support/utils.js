// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.18/esri/copyright.txt for details.
//>>built
define(["exports","../../support/arcadeOnDemand","../../Basemap","../../support/basemapUtils"],function(e,p,q,r){function g(a){return String(a).padStart(2,"0")}function m(a,b,d){if("date"===b||"number"===b){"number"===b&&(a=new Date(a));b=d?a.getFullYear():a.getUTCFullYear();const c=g((d?a.getMonth():a.getUTCMonth())+1),f=g(d?a.getDate():a.getUTCDate()),t=g(d?a.getHours():a.getUTCHours()),u=g(d?a.getMinutes():a.getUTCMinutes());a=g(d?a.getSeconds():a.getUTCSeconds());a=`TIMESTAMP'${b}-${c}-${f} ${t}:${u}:${a}'`}return a}
function h(a,b){if(b instanceof Date)return"date";if("number"===typeof b)return"number";if("string"===typeof b&&(a=a.getField(b),"\x3cnow\x3e"!==b.toLowerCase()&&a&&"date"===a.type))return"field"}const n={light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},k={years:365,months:30,days:1,hours:1/24,minutes:1/
1440,seconds:1/86400,milliseconds:1/864E5},v=["integer","small-integer"];let l=null;e.castIntegerFieldToFloat=function(a){return`cast(${a} as float)`};e.defaultBasemapGroups=n;e.getBasemapGroup=function(a,b=n){for(const d in b)if(-1<b[d].indexOf(a))return d};e.getBasemapId=function(a,b,d=!0){let c=null;"string"===typeof a&&-1<b.indexOf(a)?c=a:a instanceof q&&(c=r.getWellKnownBasemapId(a));return d?c||"gray":c};e.getDateDiffSQL=function(a,b,d,c){var {hasQueryEngine:f}=a;d=m(d,h(a,d),f);a=m(b,h(a,b),
f);a=`(${d} - ${a})`;f&&(a=`(${a} * ${k.milliseconds})`);c=k[c];f="/";1>c&&(c=1/c,f="*");return{sqlExpression:1===c?a:`(${a} ${f} ${c})`,sqlWhere:null}};e.getDateType=h;e.getFieldsList=async function(a){const b=a.field,d=a.normalizationField;a=a.valueExpression;var c=[];a&&(l||({arcadeUtils:c}=await p.loadArcade(),l=c),c=l.extractFieldNames(a));b&&c.push(b);d&&c.push(d);return c};e.getNormalizationType=function(a){let b=a.normalizationType;b||(a.normalizationField?b="field":null!=a.normalizationTotal&&
(b="percent-of-total"));return b};e.isIntegerField=function(a,b){return(a=b&&a.getField(b))&&-1<v.indexOf(a.type)};e.unitValueInDays=k;Object.defineProperty(e,"__esModule",{value:!0})});