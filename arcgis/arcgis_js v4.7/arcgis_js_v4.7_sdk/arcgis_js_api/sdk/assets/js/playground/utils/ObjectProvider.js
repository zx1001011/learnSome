/*! ArcGIS API for JavaScript 4.7 | Copyright (c) 2018 Esri. All rights reserved. | http://www.esri.com/legal/privacy | https://developers.arcgis.com/terms/faq */
define(["esri/widgets/ColorPicker","esri/widgets/support/colorUtils","esri-playground-js/utils/DataProvider","dojo/Stateful","dojo/_base/declare","dojo/dom"],function(e,t,n,a,r,o){var i={},s=r([a],{}),l=function(n){var a=new s,r=n.className||n.name;a.set("className",r);var i=n.properties;return i.forEach(function(n){var r=n.name,s=n.type,u=n.value,d=n.attributes,c=n.default,f=n.visibility,v=o.byId(n.domId+"-ID");if(a.set(r,null),"Number"===s||"String"===s){if("Number"===s&&d&&d.min&&d.max){var h=o.byId(n.domId+"-RangeID");h.addEventListener("input",function(){a.set(r,h.value)})}if(a.watch(r,function(e,t,n){if(v.value=c&&null===n?c:n,d&&d.min&&d.max&&(h.value=v.value),"url"===r){var o=new Image;o.addEventListener("load",function(){a.set("width",this.naturalWidth),a.set("height",this.naturalHeight)}),o.src=v.value}}),v.addEventListener("change",function(){if("Number"===s&&d&&v.value<d.min){var e=o.byId("msg");e.innerHTML=r+" cannot be less than "+d.min+"!";var t=new Event("errMsg");e.dispatchEvent(t),a.set(r,null)}else v.value==c?a.set(r,null):a.set(r,v.value);if(d&&d.min&&d.max){o.byId(n.domId+"-RangeID").value=v.value}if("url"===r){var i=new Image;i.addEventListener("load",function(){a.set("width",this.naturalWidth),a.set("height",this.naturalHeight)}),i.src=v.value}},!1),f){var m;i.forEach(function(e){e.name===f.name&&(m=e)});var y=o.byId(m.domId+"-ID"),p=v.parentNode.parentNode;y.value!==f.value&&(p.style.display="none"),y.addEventListener("change",function(){y.value===f.value?(p.style.display="-webkit-box",p.style.display="-moz-box",p.style.display="-ms-flexbox",p.style.display="-webkit-flex",p.style.display="flex",void 0!==c&&a.set(r,c)):(p.style.display="none",a.set(r,null))})}u&&a.set(r,u)}else if("Boolean"===s)a.watch(r,function(e,t,n){v.checked=n}),v.addEventListener("change",function(){v.checked?a.set(r,!0):a.set(r,!1)},!1);else if("Color"===s){var g=o.byId(n.domId+"-TextID");if(g){var b=new e({title:"color-picker",showRecentColors:!1,showTransparencySlider:!0,showSuggestedColors:!1,required:!0},v);b.startup();var I=c||[0,0,0,1];b.set("color",I),g.innerHTML="["+I+"]",g.style.background=b.get("color"),b.on("color-change",function(){var e=b.get("color"),n=t.getContrastingColor(e),o=e.toRgba();o[3]=Math.round(100*o[3])/100,I.every(function(e,t){return e===o[t]})?a.set(r,null):a.set(r,o),o.constructor===Array&&(o="["+o+"]"),g.innerHTML=o,g.style.background=e,g.style.color=n}),a.watch(r,function(e,t,n){null===n&&(n=I),b.set("color",n)})}}else if("Class"===s||"Object"===s){var w=n.config||n;if(w&&w.properties){a.set(r,l(w));var E=o.byId(n.domId+"-TextID"),g=[],x=a[r];w.properties.forEach(function(e){var t=e.default;null!=t?("number"==typeof t&&(t=Math.round(100*t)/100),t.constructor===Array&&(t="["+t+"]"),g.push(t)):g.push(e.name)}),E.innerHTML=g.join(", "),x.watch(function(){g=[],w.properties.forEach(function(e){var t=x[e.name]||e.default||e.name;"number"==typeof t&&(t=Math.round(100*t)/100),t.constructor===Array&&(t="["+t+"]"),g.push(t)}),E.innerHTML=g.join(", ")})}}}),a};return i.getStatefullObject=l,i.StatefulClass=s,i});